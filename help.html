<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title>CatGraphApi</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6253 2010-03-02 00:24:53Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="catgraphapi">
<h1 class="title">CatGraphApi</h1>

<div class="section" id="interoduction">
<h1>Interoduction</h1>
<p>TBD</p>
<p>Parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">op:</th><td class="field-body"><p class="first">The operation to perform. Currently, only op=list is supported.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">op=list:</th><td class="field-body">generates a list of pages. See the section <a class="reference internal" href="#list-operation">List Operation</a>
for details.</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field"><th class="field-name">format:</th><td class="field-body"><p class="first">The format parameter determines the output format.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">format=inline:</th><td class="field-body">show the result inline on the CatGraphApi page.</td>
</tr>
<tr class="field"><th class="field-name">format=json:</th><td class="field-body">generate <a class="reference external" href="http://en.wikipedia.org/wiki/JSON">JSON</a> output. The <strong>callback</strong> parameter may be set
to generate <a class="reference external" href="http://en.wikipedia.org/wiki/JSONP">JSONP</a>. See the section <a class="reference internal" href="#json-format">JSON Format</a> for details.</td>
</tr>
<tr class="field"><th class="field-name">format=debug:</th><td class="field-body">generate debug output.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="list-operation">
<h1>List Operation</h1>
<p>The list operation lists a set of wiki pages. The list is generated as follows:</p>
<p>First, a <em>base set</em> is generated by evaluating the contents of one or more categories and
all their subcategories.</p>
<p>Next, additional <em>page sets</em> can be defined. They are generated in the same way as the
base set. Each additional page set is either <em>intersected</em> with the contents of the base set,
keeping only pages that are present in both sets. Or it is <em>subtracted</em> from the base set,
so that only pages remain in the base set that are not in the addition page set. Each
additional page set is combined in this way with the base set, which serves as an
accumulator for the result.</p>
<p>Finally, a series of filters is applied to the pages that remain in the <em>base set</em>.
The following filters are supported:</p>
<ul class="simple">
<li>by namespace</li>
<li>by time of last modification</li>
<li>by time of creation</li>
<li>by size</li>
</ul>
<p>URL Parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">cat:</th><td class="field-body"><p class="first">the name of the base category, used to generate the base set. Multiple
categories may be combined by listing their names separated by a pipe
character (&quot;|&quot;).</p>
</td>
</tr>
<tr class="field"><th class="field-name">catN:</th><td class="field-body"><p class="first">(where <strong>N</strong> is a number between 2 and 15) the name of an additional
category, used to reduce the base set. Multiple categories may be combined
by listing their names separated by a pipe character (&quot;|&quot;). Per default,
the contents of the category are intersected with the base set, keeping
only pages that are present in both sets. In <em>not</em> mode, the set is
<em>subtracted</em> from the base set, so that only pages remain in the base
set that are not in the addition page set.</p>
<p>The <em>not</em> mode can be triggered by prefixing the category name (resp.
the category list) with <tt class="docutils literal">&lt;not&gt;</tt>, or by setting the corresponding
<strong>catN_not</strong> parameter to <tt class="docutils literal">not</tt>.</p>
<p>Using the <em>catN</em> parameter to specify and combine several page sets
allows for powerful set operations. Say you are interested in pages that
are in the categories <em>Writer</em> and also in either <em>New York</em> or
<em>Los Angeles</em> (or any of their subcategories), but are not in the
category <em>American people‎</em>, you can express this as follows:</p>
<pre class="literal-block">
cat=Writer&amp;cat2=New_York|Los_Angeles&amp;cat3=&lt;not&gt;American_people‎
</pre>
<p>or alternatively:</p>
<pre class="literal-block">
cat=Writer&amp;cat2=New_York|Los_Angeles&amp;cat3=American_people‎&amp;cat3_not=not
</pre>
<p>Using the <em>cat</em> parameters, the page set is thus defined using set
operations in <a class="reference external" href="http://en.wikipedia.org/wiki/Conjunctive_normal_form">conjunctive normal form</a>. The above may be understood as:</p>
<pre class="literal-block">
Writer AND ( New_York OR Los_Angeles ) AND ( NOT American_people )
</pre>
</td>
</tr>
<tr class="field"><th class="field-name">namespace:</th><td class="field-body"><p class="first">a pipe-separated list of numeric namespace ids. Only pages in
the given namespaces will be returned.</p>
</td>
</tr>
<tr class="field"><th class="field-name">template:</th><td class="field-body"><p class="first">the name of a template (or a pipe-separated list of template names).
Per default (&quot;with template&quot; mode), only pages that contain the given
template(s) remain in the result. Hoever, if <em>not</em> mode is activated
(&quot;without template&quot;), only pages not containing the given template(s)
remain in the page set.</p>
<p>The <em>not</em> mode can be triggered by prefixing the template name (resp.
the template list) with <tt class="docutils literal">&lt;not&gt;</tt>, or by setting the <strong>template_not</strong>
parameter to <tt class="docutils literal">not</tt>.</p>
</td>
</tr>
<tr class="field"><th class="field-name">templateN:</th><td class="field-body"><p class="first">(where <strong>N</strong> is a number between 2 and 15) additional templates
to use for filtering. These parameters are handled just like the
<em>template</em> parameter, including the respective <strong>templateN_not</strong> parameters.</p>
<p>Filtering by multiple sets of templates allows for powerful set
operations. Say you are interested in pages containing the templates
<em>Featured</em> or <em>Good</em>, but not the templates <em>Persondata</em> or <em>Taxobox</em>,
you can express this as follows:</p>
<pre class="literal-block">
template=Featured|Good&amp;template2=&lt;not&gt;Persondata|Taxobox
</pre>
<p>or, alternatively:</p>
<pre class="literal-block">
template=Featured|Good&amp;template2=Persondata|Taxobox&amp;template2_not=not
</pre>
<p>Using the <em>template</em> parameters, the page set is thus refined using set
operations in <a class="reference external" href="http://en.wikipedia.org/wiki/Conjunctive_normal_form">conjunctive normal form</a>. The above may be understood as:</p>
<pre class="literal-block">
( Featured OR Good ) AND ( NOT ( Persondata OR Taxobox ) )
</pre>
<p>Note that in <em>not</em> mode, specifying several templates in one page set
is equivalent to specifying multiple page sets. The above can thus also
be achived by:</p>
<pre class="literal-block">
template=Featured|Good&amp;template2=&lt;not&gt;Persondata&amp;template3=&lt;not&gt;Taxobox
</pre>
<p>which represents:</p>
<pre class="literal-block">
( Featured OR Good ) AND ( NOT Persondata ) AND ( NOT Taxobox )
</pre>
<p>This does not apply in the default (&quot;with template&quot;) mode.</p>
</td>
</tr>
<tr class="field"><th class="field-name">since:</th><td class="field-body"><p class="first">includes only pages that have been modified since the given date.</p>
<p>The date is given as <cite>YYYY-MM-DD HH:MM:SS</cite>, meaning year, month
and day followed by hour (24 hour base), minutes and seconds. The
seconds part or the entire time part may be omitted, leaving only
the date. The separators (dash &quot;-&quot;, space &quot; &quot; and colon &quot;:&quot;) are
optional, but they must either be all present or all omitted. Examples:</p>
<ul class="simple">
<li>2011-12-20 15:00:00: 3pm on December 20, 2011.</li>
<li>2011-12-20 15:00: also 3pm on December 20, 2011.</li>
<li>201112201500: also 3pm on December 20, 2011.</li>
<li>2011-12-20 15: <em>invalid!</em></li>
<li>2011-12-20: midnight before December 20, 2011.</li>
<li>20111220: also midnight before December 20, 2011.</li>
<li>20111220 15:00: <em>invalid!</em></li>
</ul>
<p>The date may also be given <em>relative</em> to the current time, using a
number followed by <em>d</em>, <em>h</em> or <em>m</em>, signifying a number of days,
hours or minutes respectivley. So, <em>2d</em> means &quot;two days ago&quot; and
<em>5m</em> means &quot;five minutes ago&quot;.</p>
<p>Note that relative times are subject to clock skew between the wiki
server and the server running the CatGraphApi.</p>
</td>
</tr>
<tr class="field"><th class="field-name">older:</th><td class="field-body"><p class="first">include only pages created before the given date. The date format
is the same as for the <em>since</em> parameter.</p>
</td>
</tr>
<tr class="field"><th class="field-name">newer:</th><td class="field-body"><p class="first">include only pages created after the given date. The date format
is the same as for the <em>since</em> parameter.</p>
</td>
</tr>
<tr class="field"><th class="field-name">larger:</th><td class="field-body"><p class="first">include only pages larger than the given size. The suffixes <em>k</em>
and <em>m</em> may be used to provide the size in kilobyte or megabyte,
respectively.</p>
</td>
</tr>
<tr class="field"><th class="field-name">smaller:</th><td class="field-body"><p class="first last">include only pages smaller than the given size. The suffixes <em>k</em>
and <em>m</em> may be used to provide the size in kilobyte or megabyte,
respectively.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="json-format">
<h1>JSON Format</h1>
<p>The JSON output has the following form:</p>
<pre class="literal-block">
{
        &quot;log&quot;: [
                {&quot;categories&quot;: [&quot;American biologists&quot;], &quot;step_time&quot;: 0.028958}
,               {&quot;list&quot;: &quot;subcategories&quot;, &quot;category&quot;: &quot;American biologists&quot;, &quot;depth&quot;: 100, &quot;items&quot;: 32, &quot;step_time&quot;: 0.695728}
,               {&quot;expand&quot;: &quot;categories&quot;, &quot;ns&quot;: &quot;&quot;, &quot;items&quot;: 2691, &quot;step_time&quot;: 0.760318}
,               {&quot;base&quot;: &quot;category&quot;, &quot;category&quot;: &quot;American biologists&quot;, &quot;items&quot;: 2691}
,               {&quot;categories&quot;: [&quot;Nobel_laureates&quot;], &quot;step_time&quot;: 0.024145}
,               {&quot;list&quot;: &quot;subcategories&quot;, &quot;category&quot;: &quot;Nobel_laureates&quot;, &quot;depth&quot;: 100, &quot;items&quot;: 93, &quot;step_time&quot;: 0.697264}
,               {&quot;expand&quot;: &quot;categories&quot;, &quot;ns&quot;: &quot;&quot;, &quot;items&quot;: 1025, &quot;step_time&quot;: 0.727509}
,               {&quot;filter&quot;: &quot;cut&quot;, &quot;category&quot;: &quot;Nobel_laureates&quot;, &quot;items&quot;: 76, &quot;step_time&quot;: 0.071994}
,               {&quot;total_time&quot;: 3.006035}
        ]
,       &quot;items&quot;: [
                {&quot;id&quot;: 17095, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Kary_Mullis&quot;}
,               {&quot;id&quot;: 17367, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Konrad_Emil_Bloch&quot;}
,               {&quot;id&quot;: 31522, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Thomas_Hunt_Morgan&quot;}
,               {&quot;id&quot;: 34051, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Walter_Gilbert&quot;}
,               {&quot;id&quot;: 37342, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Linus_Pauling&quot;}
,               {&quot;id&quot;: 51775, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Sidney_Altman&quot;}
,               {&quot;id&quot;: 55188, &quot;ns&quot;: 0, &quot;title&quot;: &quot;Barbara_McClintock&quot;}
        ]
,       &quot;status&quot;: {&quot;status&quot;: &quot;ok&quot;, &quot;items&quot;: 76}
}
</pre>
<p>There are three sections in the result:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">log:</th><td class="field-body">This section contains information about query processing and may be used for optimazation
and debugging. It contains a list of activities, along with timing information for each step.</td>
</tr>
<tr class="field"><th class="field-name">items:</th><td class="field-body">This section contains the actual result of the query, as a list of items (usually pages).
For a query that returns wiki pages, the items have the properties <em>id</em> (the page_id), <em>ns</em>
(the page_namespace) and <em>title</em> (the page_title, in database form, without namespace prefix).</td>
</tr>
<tr class="field"><th class="field-name">status:</th><td class="field-body">This is a single object representing the outcome of the query. If the <em>status</em> field is &quot;ok&quot;
the query was successful. Otherwise, the status will be &quot;error&quot;.</td>
</tr>
</tbody>
</table>
<p>Below is an example of a failed query:</p>
<pre class="literal-block">
{
        &quot;log&quot;: [
                {&quot;categories&quot;: [&quot;American biologists&quot;], &quot;step_time&quot;: 0.021259}
,               {&quot;list&quot;: &quot;subcategories&quot;, &quot;category&quot;: &quot;American biologists&quot;, &quot;depth&quot;: 100, &quot;items&quot;: 32, &quot;step_time&quot;: 0.692975}
,               {&quot;expand&quot;: &quot;categories&quot;, &quot;ns&quot;: &quot;&quot;, &quot;items&quot;: 2691, &quot;step_time&quot;: 0.778038}
,               {&quot;base&quot;: &quot;category&quot;, &quot;category&quot;: &quot;American biologists&quot;, &quot;items&quot;: 2691}
,               {&quot;categories&quot;: [&quot;Nobel_winner&quot;], &quot;step_time&quot;: 0.009091}
        ]
,       &quot;status&quot;: {&quot;status&quot;: &quot;error&quot;, &quot;type&quot;: &quot;gpClientException&quot;, &quot;message&quot;: &quot;Page not found in namespace 14: Nobel_winner&quot;}
}
</pre>
<p>Here, the status reports the type of the error that was encountered, and an error message.</p>
</div>
</div>
</body>
</html>
